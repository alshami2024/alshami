
      <!DOCTYPE html>
      <html lang="ar" dir="rtl">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>امتحان تاريخ وفلسفة القانون</title>
        <style>
          body {
            font-family: 'Cairo', sans-serif;
            background-color: #f7f9fc;
            margin: 0;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            direction: rtl;
            text-align: right;
          }
          .container {
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 600px;
            padding: 20px;
            text-align: center;
          }
          h1 {
            color: #333;
            margin-bottom: 20px;
          }
          .error-message {
            color: #e74c3c;
            font-size: 18px;
            font-weight: bold;
          }
          ul {
            list-style-type: none;
            padding: 0;
          }
          ul li {
            display: flex;
            align-items: center;
            padding: 8px;
            margin: 5px 0;
            background: #f2f2f2;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
          }
          ul li:hover {
            background-color: #e0e0e0;
          }
          ul li input[type="radio"] {
            margin-left: 10px;
            margin-right: 5px;
            cursor: pointer;
            width: 16px;
            height: 16px;
          }
          .timer {
            font-size: 18px;
            color: #e74c3c;
            font-weight: bold;
            margin: 10px 0;
          }
          button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
          }
          button:hover {
            background-color: #45a049;
          }
        </style>
      </head>
      <body>
        <div class="container" id="examContainer">
          <h1>امتحان تاريخ وفلسفة القانون</h1>
          <div id="startContainer">
            <input type="text" id="studentName" placeholder="أدخل اسمك" required>
            <button id="startButton">بدء الاختبار</button>
          </div>
          <div id="questionsContainer" style="display:none;"></div>
          <div id="resultContainer" style="display:none;">
            <h2>تم الانتهاء من الامتحان!</h2>
            <p id="resultMessage"></p>
          </div>
          <script>
if (localStorage.getItem('examCompleted')) {
        document.getElementById('startContainer').innerHTML = '<p>لقد أكملت الامتحان بالفعل.</p>';
      }
            const questions = [{"questionText":"ما هي العلاقة بين مفهوم \"التفسير المحكم\" لفلسفة القانون ونشوء القوانين؟","choices":["أ. التفسير المحكم يركز فقط على الأبعاد الاقتصادية لتطور القوانين.","ب. التفسير المحكم يعتمد فقط على دراسة التأثيرات الأخلاقية للقوانين.","ج. التفسير المحكم يشمل نشوء القوانين وتطورها وتأثيرها الاجتماعي.","د. التفسير المحكم يهتم بتطبيق القوانين دون دراسة أصولها."],"correctAnswer":3,"time":40},{"questionText":"كيف يمكن تفسير الانتقال من مرحلة \"الانتقام الفردي\" إلى \"التقاليد العرفية\" في القانون؟","choices":["أ. ظهور الحاجة إلى قوانين دينية لإدارة المجتمع.","ب. زيادة تدخل الكهنة ورجال الدين في حل النزاعات.","ج. تعزيز فكرة القوة كأساس لتطبيق القوانين.","د. إدراك أهمية تحقيق العدالة الجماعية على حساب العدالة الفردية."],"correctAnswer":4,"time":40},{"questionText":"ما هو السبب الأساسي لظهور مفهوم \"الجزاء\" في القوانين العرفية القديمة؟","choices":["أ. ضمان تحقيق العدالة المطلقة بين أفراد المجتمع.","ب. منع أفراد المجتمع من اللجوء إلى الانتقام الفردي.","ج. تعزيز النظام الاجتماعي من خلال فرض عقوبات محددة.","د. تحقيق رضا رجال الدين عن سلوك الأفراد."],"correctAnswer":2,"time":40},{"questionText":"لماذا يُعتبر نظام \"التحكيم\" نقطة تحول في تسوية النزاعات؟","choices":["أ. لأنه أتاح للأفراد حل النزاعات بشكل سلمي دون اللجوء إلى القوة.","ب. لأنه ساعد على تقليل تأثير رجال الدين على النظام القانوني.","ج. لأنه كان أول نظام يعتمد على قوانين مكتوبة واضحة.","د. لأنه ركز على تطوير نظام قضائي متقدم بعيد عن الأعراف."],"correctAnswer":1,"time":40},{"questionText":"ما هو الهدف الأساسي من مرحلة \"التقاليد العرفية\" في تطور القانون؟","choices":["أ. تحقيق الاستقرار الاجتماعي من خلال قوانين مكتوبة.","ب. تنظيم العلاقات بين الأفراد استنادًا إلى قواعد دينية فقط.","ج. تطوير قواعد عامة تتماشى مع حاجات المجتمع دون تدوينها.","د. فصل القانون عن المؤثرات الاجتماعية والدينية."],"correctAnswer":3,"time":40}];
            let currentQuestionIndex = 0;
            let score = 0;
            let studentName = '';
            let timer;



  document.addEventListener('DOMContentLoaded', () => {
    const savedName = localStorage.getItem('studentName');
    const nameInput = document.getElementById('studentName');

    // إذا كان الاسم محفوظًا في `localStorage`، قم بعرضه وتعطيل حقل الإدخال
    if (savedName) {
      nameInput.value = savedName;
      nameInput.disabled = true;
    }

    document.getElementById('startButton').addEventListener('click', function () {
      // احصل على الاسم من الحقل أو `localStorage`
      studentName = savedName || nameInput.value;

      if (!studentName) {
        alert("يرجى إدخال اسمك للمتابعة.");
        return;
      }

      // احفظ الاسم في `localStorage` إذا لم يكن موجودًا
      if (!savedName) {
        localStorage.setItem('studentName', studentName);
      }

      // أخفِ شاشة البداية وأظهر الأسئلة
      document.getElementById('startContainer').style.display = 'none';
      document.getElementById('questionsContainer').style.display = 'block';

      // ابدأ الامتحان باستخدام اسم الطالب
      startExam(studentName);
    });
  });

  function startExam(studentName) {
    let currentQuestionIndex = 0;
    let score = 0;
    let timer;

    function showQuestion(index) {
      const container = document.getElementById('questionsContainer');
      container.innerHTML = '';

      // إذا انتهت الأسئلة، عرِض النتائج
      if (index >= questions.length) {
        document.getElementById('questionsContainer').style.display = 'none';
        document.getElementById('resultContainer').style.display = 'block';
        document.getElementById('resultMessage').textContent = `شكراً ${studentName}! لقد أجبت بشكل صحيح على ${score} من أصل ${questions.length} أسئلة.`;
        sendToTelegram(studentName, score, questions.length);
        return;
      }

      const question = questions[index];
      const questionElement = document.createElement('div');
      questionElement.classList.add('question');
      questionElement.innerHTML = `
        <h2>السؤال ${index + 1}</h2>
        <p>${question.questionText}</p>
        <ul>
          ${question.choices.map((choice, i) => `
            <li>
              <input type="radio" name="answer" value="${i + 1}">
              ${choice}
            </li>
          `).join('')}
        </ul>
        <p class="timer">الوقت المتبقي: <span id="timer">${question.time}</span> ثانية</p>
        <button id="nextButton">التالي</button>
      `;

      container.appendChild(questionElement);

      const timerElement = document.getElementById('timer');
      let timeLeft = question.time;

      timer = setInterval(() => {
        timeLeft--;
        timerElement.textContent = timeLeft;
        if (timeLeft <= 0) {
          clearInterval(timer);
          checkAnswer();
        }
      }, 1000);

      document.getElementById('nextButton').addEventListener('click', function () {
        clearInterval(timer);
        checkAnswer();
      });

      function checkAnswer() {
        const selectedAnswer = document.querySelector('input[name="answer"]:checked');
        if (selectedAnswer && parseInt(selectedAnswer.value) === question.correctAnswer) {
          score++;
        }
        currentQuestionIndex++;
        showQuestion(currentQuestionIndex);
      }
    }

    showQuestion(currentQuestionIndex);
  }

  function sendToTelegram(name, score, totalQuestions) {
    const message = `📋 *امتحان جديد*\n👤 *اسم الطالب:* ${name}\n✅ *النتيجة:* ${score}/${totalQuestions}\n`;
    fetch(`https://api.telegram.org/bot7730074042:AAE7SoB8JraxwYc22_LrCCrSuglqJgMDN7Y/sendMessage`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        chat_id: 152435304,
        text: message,
        parse_mode: 'Markdown',
      }),
    }).catch((error) => console.error('خطأ في الإرسال:', error));
  }
</script>
  </script>
</body>
</html>

    
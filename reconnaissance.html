<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>استطلاع رأي طلابي حول جامعة الضالع</title>
<style>
  body {
    font-family: 'Arial', sans-serif;
    background-image: url('https://www.transparenttextures.com/patterns/purty-wood.png');
    background-color: #f0f4f8;
    color: #333;
    display: flex;
    align-items: flex-start;
    justify-content: center;
    height: 100vh;
    margin: 0;
    padding: 20px;
    direction: rtl;
    text-align: right;
  }
  .container {
    background: rgba(255, 255, 255, 0.95);
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    max-width: 600px;
    width: 100%;
    margin-top: 40px;
  }
  h2 {
    color: #0056b3;
    text-align: center;
    font-size: 1.8em;
    margin-bottom: 20px;
  }
  .description {
    text-align: center;
    font-size: 1.1em;
    color: #555;
    margin-bottom: 40px;
    line-height: 1.6;
  }
  .question {
    margin-bottom: 25px;
  }
  label {
    display: block;
    margin-bottom: 8px;
    font-weight: bold;
    color: #333;
  }
  select, input[type="text"], textarea {
    width: 100%;
    padding: 12px;
    margin-top: 5px;
    border: 1px solid #ddd;
    border-radius: 8px;
    font-size: 1em;
    background-color: #f9f9f9;
    text-align: right;
  }
  .submit-btn {
    background-color: #0056b3;
    color: #ffffff;
    padding: 12px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1.1em;
    width: 100%;
    margin-top: 20px;
    transition: background-color 0.3s;
  }
  .submit-btn:hover {
    background-color: #004494;
  }
</style>
</head>
<body>
<div class="container">
  <h2>استطلاع رأي طلاب جامعة الضالع</h2>
  <p class="description">حرصاً من إدارة جامعة الضالع على تحسين تجربة الطلاب وتقديم أفضل الخدمات التعليمية، ندعوكم للمشاركة في هذا الاستطلاع. آراؤكم واقتراحاتكم ستساعدنا في تطوير البرامج الأكاديمية والخدمات المقدمة بما يلبي احتياجاتكم ويعزز من جودة التعليم في الجامعة.</p>
  
  <form id="surveyForm">
    <div class="question">
      <label>ما هو تخصصك الدراسي؟</label>
      <input type="text" id="major" placeholder="أدخل تخصصك" required>
    </div>
    <!-- أسئلة إضافية -->
    <button type="submit" class="submit-btn">إرسال</button>
  </form>
</div>

<script>
  function setCookie(name, value, days) {
    let date = new Date();
    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
    document.cookie = name + "=" + value + ";expires=" + date.toUTCString() + ";path=/";
  }

  function getCookie(name) {
    let cookies = document.cookie.split(';');
    for (let i = 0; i < cookies.length; i++) {
      let c = cookies[i].trim();
      if (c.indexOf(name + "=") === 0) return c.substring(name.length + 1, c.length);
    }
    return "";
  }

  document.addEventListener("DOMContentLoaded", function() {
    if (localStorage.getItem("surveyCompleted") === "true" || getCookie("surveyCompleted") === "true") {
      alert("لقد قمت بإتمام هذا الاستطلاع من قبل. شكرًا!");
      document.getElementById("surveyForm").style.display = "none";
    }
  });

  document.getElementById("surveyForm").addEventListener("submit", function(event) {
    event.preventDefault();

    if (localStorage.getItem("surveyCompleted") === "true" || getCookie("surveyCompleted") === "true") {
      alert("لقد قمت بإتمام هذا الاستطلاع من قبل. شكرًا!");
      return;
    }

    const major = document.getElementById("major").value;
    const message = `تخصص: ${major}`;
    const telegramBotToken = "7730074042:AAE7SoB8JraxwYc22_LrCCrSuglqJgMDN7Y";
    const chatId = "152435304";

    fetch(`https://api.telegram.org/bot${telegramBotToken}/sendMessage`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        chat_id: chatId,
        text: message
      })
    })
    .then(response => response.json())
    .then(data => {
      if (data.ok) {
        alert("تم إرسال الاستطلاع بنجاح. شكرًا لمشاركتك!");
        localStorage.setItem("surveyCompleted", "true");
        setCookie("surveyCompleted", "true", 365);
        document.getElementById("surveyForm").reset();
      } else {
        alert(`حدث خطأ أثناء الإرسال: ${data.description}`);
      }
    })
    .catch(error => {
      alert("حدث خطأ أثناء الإرسال. يرجى المحاولة لاحقًا.");
      console.error("Error:", error);
    });
  });
</script>
</body>
</html>

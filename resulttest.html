
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÿ™ÿØÿ±Ÿäÿ®ÿßÿ™ ÿßŸÑÿ•ÿ∂ÿßŸÅÿ© ŸàÿßŸÑŸÖÿµÿØÿ± (4) </title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary-color: #0056b3; --secondary-color: #007bff; --light-gray: #f8f9fa; --dark-gray: #343a40; --success-color: #28a745; --danger-color: #dc3545; --background-color: #e9ecef; --text-color: #212529; --white: #fff; }
        body { font-family: 'Tajawal', sans-serif; background-color: var(--background-color); margin: 0; padding: 20px; color: var(--text-color); direction: rtl; }
        .container { background-color: var(--white); border-radius: 15px; box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1); width: 95%; max-width: 900px; margin: 0 auto; padding: 30px; }
        h1, h2, h3 { color: var(--dark-gray); font-weight: 700; }
        .form-group { margin-bottom: 15px; } .form-group label { display: block; margin-bottom: 5px; font-weight: 500; }
        .form-group input[type="text"], .form-group textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        .btn { background-color: var(--primary-color); color: var(--white); border: none; padding: 12px 25px; font-size: 18px; font-weight: bold; border-radius: 8px; cursor: pointer; transition: background-color 0.3s; }
        .btn:hover { background-color: #004a99; } .btn:disabled { background-color: #ccc; }
        .btn-danger { background-color: var(--danger-color); }
        .exam-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; }
        .timer { font-size: 1.2em; color: var(--danger-color); font-weight: bold; }
        .question-card { background: var(--light-gray); border: 1px solid #dee2e6; border-radius: 10px; padding: 20px; margin-bottom: 20px; text-align: right; }
        .question-card ul { list-style: none; padding: 0; }
        .choices li { padding: 10px; margin: 8px 0; background: var(--white); border: 1px solid #ddd; border-radius: 8px; cursor: pointer; transition: all 0.2s; }
        .choices li:hover { background-color: #e3f2fd; }
        .choices li.correct { background-color: #d4edda !important; border-color: #c3e6cb; }
        .choices li.incorrect { background-color: #f8d7da !important; border-color: #f5c6cb; }
        .essay-answer { width: 100%; min-height: 120px; resize: vertical; margin-top: 15px; padding: 10px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        #navigation-buttons { display: flex; justify-content: space-between; margin-top: 20px; }
        #progressBarContainer { width: 100%; background-color: #e9ecef; border-radius: 20px; margin-bottom: 25px; overflow: hidden; }
        #progressBar { width: 0%; height: 20px; background-color: var(--success-color); border-radius: 20px; transition: width 0.5s; text-align: center; color: white; line-height: 20px; }
        #certificate { display: none; border: 5px solid var(--primary-color); padding: 30px; margin-top: 30px; text-align: center; background: linear-gradient(135deg, #f9f9f9, #eef8ff); }
        #startScreen, #examArea, #resultContainer { display: none; }
        
    </style>
</head>
<body>
<div class="container">
    <div id="studentExamView" style="display:block;">
        <div id="startScreen" style="display:block;">
            <h1 id="examTitleStudent"></h1>
            <p id="examDescriptionStudent" style="white-space: pre-wrap;"></p>
            <div class="form-group"><label for="studentName">ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖŸÉ ÿßŸÑŸÉÿßŸÖŸÑ ŸÑÿ®ÿØÿ° ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±</label><input type="text" id="studentName" placeholder="ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ"></div>
            <button id="startExamBtn" class="btn">ÿ®ÿØÿ° ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±</button>
        </div>
        <div id="examArea">
            <div class="exam-header"><h2 id="welcomeStudent"></h2><div id="timer" class="timer"></div></div>
            <div id="progressBarContainer"><div id="progressBar"></div></div>
            <div id="questionsContainer"></div>
            <div id="navigation-buttons"></div>
            <button id="finishExamBtn" class="btn btn-danger" style="margin-top: 20px; width:100%;">ÿ•ŸÜŸáÿßÿ° Ÿàÿ™ÿ≥ŸÑŸäŸÖ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±</button>
        </div>
        <div id="resultContainer">
             <h2 id="resultTitle"></h2><p id="resultSummary"></p>
             <div id="reviewContainer"></div>
             <div id="certificate">
                <h2>ÿ¥ŸáÿßÿØÿ© ÿ•ÿ™ŸÖÿßŸÖ</h2><p>ÿ™ÿ¥ŸáÿØ Ÿáÿ∞Ÿá ÿßŸÑÿ¥ŸáÿßÿØÿ© ÿ®ÿ£ŸÜ ÿßŸÑÿ∑ÿßŸÑÿ®/ÿ©:</p><h3 id="certName"></h3>
                <p>ŸÇÿØ ÿ£ÿ™ŸÖ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ± ÿ®ŸÜÿ¨ÿßÿ≠ Ÿàÿ≠ÿµŸÑ/ÿ™ ÿπŸÑŸâ ÿØÿ±ÿ¨ÿ©:</p><h3 id="certScore"></h3>
                <p>ÿ®ÿ™ÿßÿ±ŸäÿÆ: <span id="certDate"></span></p>
            </div>
        </div>
    </div>
</div>
<script>
    //!---START: DECODE EXAM DATA---!//
    const encodedExamData = 'ZXlKamIyNW1hV2NpT25zaWRHbDBiR1VpT2lMWXF0aXYyTEhaaXRpbzJLZllxaURZcDltRTJLWFl0dGluMllIWXFTRFppTmluMllUWmhkaTEySy9Zc1NBb05Da2dJaXdpWkdWelkzSnBjSFJwYjI0aU9pTFpndGl6MllVZzJLZlpoTm1FMkxyWXFTRFlwOW1FMkxuWXNkaW8yWXJZcVNEWXA5bUUyWVhZczlpcTJZalppU0RZcDltRTJLdllwOW1FMkt0Y2J0bUcySzNaaURRaUxDSnpkR0Z5ZEZScGJXVWlPaUl5TURJMUxUQTRMVEl5VkRJd09qSXdJaXdpWlc1a1ZHbHRaU0k2SWpJd01qVXRNRGd0TWpkVU1qTTZOVGtpTENKc1lYbHZkWFFpT2lKdmJtVXRZbmt0YjI1bElpd2lkR2x0WlNJNk5qQXNJbk5vZFdabWJHVWlPblJ5ZFdVc0ltNXZSMjlwYm1kQ1lXTnJJanAwY25WbExDSmthWE5oWW14bFEyaGxZWFJwYm1jaU9tWmhiSE5sTENKdGIyNXBkRzl5VkdGaWN5STZkSEoxWlN3aVptbHVhWE5vVDI1VGQybDBZMmdpT21aaGJITmxMQ0pzWldGeWJtbHVaMDF2WkdVaU9uUnlkV1VzSW5OcGJtZHNaVlZ6WlUxdlpHVWlPblJ5ZFdVc0luTm9iM2RTWlhOMWJIUnpJanAwY25WbExDSmxibUZpYkdWU1pYWnBaWGNpT25SeWRXVXNJbVZ1WVdKc1pVTmxjblJwWm1sallYUmxJanAwY25WbExDSjBhR1Z0WlNJNkltUmxabUYxYkhRaUxDSnpkV05qWlhOelVHVnlZMlZ1ZEdGblpTSTZOVEFzSW1KdmRGUnZhMlZ1SWpvaU9EUTNNVFF6TWpZNU9UcEJRVWRQZERGbVFXdzRia1kzYkZVdFpXRkxkRzFxUW14Vk4xUjZkV0pHUTJWalRTSXNJbU5vWVhSSlpDSTZJalk0T1RVNU5qQXpPRFlpZlN3aWNYVmxjM1JwYjI1eklqcGJleUowZVhCbElqb2liV054SWl3aWRHVjRkQ0k2SXRtRjJLY2cySy9aaENEWXVkbUUyWWtnMkszWXI5aXJJTm1GMllMWXF0aXgyWVlnMktqWXN0bUYyWVlnMllmWmlDSXNJbU5vYjJsalpYTWlPbHNpMktmWmhObUYyTFhZcjlpeElpd2kyS2ZZczltRklOaW4yWVRaaGRpMTJLL1lzU0lzSXRpbjJZVFpnZGk1MllRaUxDTFlwOW1FMllIWXA5aTUyWVFpWFN3aVkyOXljbVZqZEVGdWMzZGxjaUk2TW4wc2V5SjBlWEJsSWpvaWJXTnhJaXdpZEdWNGRDSTZJdG1LMkxuWmhkbUVJTmluMllUWmhkaTEySy9Zc1NEWXFOaXEyWUxZcjltSzJMRWdLTm1GMktjcElObUkyS2ZaaE5tQjJMblpoTmlNSU5pbDJMRFlweURZbzlpeDJZcllyeURZcU5tSElpd2lZMmh2YVdObGN5STZXeUxZcDltRTJLM1lwOW1FSWl3aTJLZlpoTm1GMkxQWXF0bUMyS2paaENJc0l0aW4yWVRaaGRpbjJMYlppaUlzSXRtRTJLY2cyTFRaaXRpaElObUYyWVhZcHlEWXM5aW8yWUlpWFN3aVkyOXljbVZqZEVGdWMzZGxjaUk2TUgwc2V5SjBlWEJsSWpvaWJXTnhJaXdpZEdWNGRDSTZJdG1DMktmWmhDRFlwOW1FMkxUWXA5aTUyTEU2WEc3WXR0bUsyTG5aZ2RtUElOaW4yWVRaaHRtRDJLZlppdGlwMlpBZzJLUFl1ZGl2MktmWW9kbUhMaTR1SUZ4dTJZcllydGluMllRZzJLZlpoTm1CMkxIWXA5aXhJTm1LMkxIWXA5aXUyWW9nMktmWmhOaWoyS3paaEM0Z1hHNWNidG1HMllqWXVTRFlwOW1FMllYWXRkaXYyTEVnMllIWmlpRFlwOW1FMktqWml0aXFJTmluMllUWXM5aW4yS2paZ2lJc0ltTm9iMmxqWlhNaU9sc2kyWVhZdGRpdjJMRWcyWVhaaHRtSTJZWWlMQ0xaaGRpMTJLL1lzU0RaaGRpMjJLZlpnU0lzSXRtRjJMWFlyOWl4SU5tRjJLM1poTm1KSU5pbzJLUFpoQ0lzSXRtRTJLY2cyTFRaaXRpaElObUYyWVhZcHlEWXM5aW8yWUlpWFN3aVkyOXljbVZqZEVGdWMzZGxjaUk2TVgwc2V5SjBlWEJsSWpvaWJXTnhJaXdpZEdWNGRDSTZJdG1DMktmWmhDRFlxdGk1MktmWmhObUpPaUFvMllqWmhObUkyWVRZcHlEWXI5bUIyTGtnMktmWmhObUUyWWNnMktmWmhObUcyS2ZZc3lEWXFOaTUyTGJaaDltRklOaW8yS2pZdWRpMklObUUyWUhZczlpdjJLb2cyS2ZaaE5pajJMSFl0aWtnWEc3WXBkaTUyTEhZcDlpb0lObUQyWVRaaGRpcElDallwOW1FMlliWXA5aXpLU0lzSW1Ob2IybGpaWE1pT2xzaTJZWFl0dGluMllFZzJLWFpoTm1LMlljZzJZWFlyTml4MllqWXNTRFpoTm1CMkxqWXB5RFpoZG1HMkxYWmlOaW9JTm1GMkszWmhOaW4yWXNpTENMWmhkaTIyS2ZaZ1NEWXBkbUUyWXJaaHlEWmhkaXMyTEhaaU5peElpd2kyWUhZcDlpNTJZUWcyWVhZc2RtQjJZall1U0lzSXRtRjJZSFl1ZG1JMllRZzJLalpoeURaaGRtRzJMWFppTmlvSWwwc0ltTnZjbkpsWTNSQmJuTjNaWElpT2pOOUxIc2lkSGx3WlNJNkltMWpjU0lzSW5SbGVIUWlPaUxaaGRtR0lOaXQyWUlnMktmWmhObUYyTFBaaE5tRklOaTUyWVRaaVNEWXA5bUUyWVhZczltRTJZVWcyS1hZck5pbjJLallxdG1ISU5pbjJZVFlyOWk1MllqWXFkaU1JTm1JMktmWmhOaXoyWVRZcDltRklOaTUyWVRaaXRtSExpQmNidGluMkxQWXF0aXUyTEhZckNBbzJLZllzOW1GSU5tRjJMWFlyOWl4S1NEWmhkbUdJTmluMllUWXJObUYyWVRZcVNJc0ltTm9iMmxqWlhNaU9sc2kySzNaZ2lJc0l0aWwyS3pZcDlpbzJLclpoeUlzSXRpbjJZVFlzOW1FMktmWmhTSXNJdG1FMktjZzJZclppTmlzMks4aVhTd2lZMjl5Y21WamRFRnVjM2RsY2lJNk1uMHNleUowZVhCbElqb2liV054SWl3aWRHVjRkQ0k2SXRpejJMSFpodG1LSU5pbjJLclpndGluMllZZzJMUFl1ZGluMks4ZzJZalpnZGluMkxmWmhkaXBJTmlsMkxuWXNkaW4yS2dnMktmWmhOaXMyWVhaaE5pcExpQmNibHh1MktmWmhOaTIyS2pZdHlEWXA5bUUyTFhZcmRtSzJLMGcyWVRaZzltRTJZWFlxU0RaZ2RpbjJMZlpoZGlwSWl3aVkyaHZhV05sY3lJNld5TFlyTm1JMktmWXNpRFlwOW1FMkt6WXNTRFpoZGl4MktmWXVkaW4yS2tnMllUWmhObUIyTGpZakNEWmlOaXMyWWpZcDlpeUlOaW4yWVRaaHRpMTJLZ2cyWVhZc2RpbjJMbllwOWlwSU5tRTJZVFpoZGl0MllRaUxDTFlyTm1JMktmWXNpRFlwOW1FMkt6WXNTRFpoZGl4MktmWXVkaW4yS2tnMllUWmhObUIyTGpZakNEWmlOaXMyWWpZcDlpeUlOaW4yWVRZc2RtQjJMa2cyWVhZc2RpbjJMbllwOWlwSU5tRTJZVFpoZGl0MllRaUxDTFppTmlzMllqWXFDRFlwOW1FMkt6WXNTRFpnZG1DMkxjaUxDTFppTmlzMllqWXFDRFlwOW1FMkxIWmdkaTVJTm1CMllMWXR5SmRMQ0pqYjNKeVpXTjBRVzV6ZDJWeUlqb3hmU3g3SW5SNWNHVWlPaUp0WTNFaUxDSjBaWGgwSWpvaTJZTFlwOW1FSU5pcTJMbllwOW1FMllrNklDalppTmluMllUWmhObUhJTmlqMlliWXFOaXEyWVBaaFNEWmhkbUdJTmluMllUWW85aXgyTFlnMlliWXFOaW4yS3JZcHlrZ1hHN1pnOW1FMllYWXFTQW8yWWJZcU5pbjJLcllweWtpTENKamFHOXBZMlZ6SWpwYkl0aW4yTFBaaFNEWmdkaW4yTG5aaENJc0l0aTEyWXJZdXRpcElObUYyS2pZcDltRTJMcllxU0lzSXRtRjJMWFlyOWl4SWl3aTJLZllzOW1GSU5tRjJMWFlyOWl4SWwwc0ltTnZjbkpsWTNSQmJuTjNaWElpT2pOOUxIc2lkSGx3WlNJNkltMWpjU0lzSW5SbGVIUWlPaUxaZ3RpbjJZUWcyS3JZdWRpbjJZVFppVG9nS05tQjJLWFlzTmluSU5tRzJZL1pnZGl1SU5tQjJZb2cyS2ZaaE5pMTJZallzU0RaaHRtQjJLN1lxZG1NSU5tSTJLZllyZGl2MktrcElGeHUyS1hZdWRpeDJLZllxQ0RaZzltRTJZWFlxU0FvMlliWmdkaXUyS2twSWl3aVkyaHZhV05sY3lJNld5TFpnZGluMkxuWmhDSXNJdG1HMktmWXB0aW9JTm1CMktmWXVkbUVJaXdpMllYWmdkaTUyWWpaaENEWmhkaTMyWVRaZ2lJc0l0bUYyWUhZdWRtSTJZUWcyS2paaHlKZExDSmpiM0p5WldOMFFXNXpkMlZ5SWpveGZTeDdJblI1Y0dVaU9pSnRZM0VpTENKMFpYaDBJam9pMllMWXA5bUVJTmlxMkxuWXA5bUUyWWs2SUNqWmlObUcyWWpZcmRpbklObUgySy9aaXRtRzJLY2cyWVhaaGlEWmd0aW8yWVRaanlrZ1hHN1lwZGk1MkxIWXA5aW9JTm1EMllUWmhkaXBJQ2paZ3RpbzJZUXBJTm1CMllvZzJLZlpoTmlpMllyWXFTSXNJbU5vYjJsalpYTWlPbHNpMkxqWXNkbUJJTml5MllYWXA5bUdJTm1GMlliWXRkbUkyS2dpTENMWXA5aXoyWVVnMllYWXJOaXgyWWpZc1NEWmlOaTUyWVRZcDltRjJLa2cyS3pZc2RtSElOaW4yWVRaZzlpejJMSFlxU0lzSXRpNDJMSFpnU0RZc3RtRjJLZlpoaURaaGRpbzJZYlppaURaZ2RtS0lObUYySzNaaENEWXJOaXhJaXdpMkxqWXNkbUJJTml5MllYWXA5bUdJTm1GMktqWmh0bUtJTm1CMllvZzJZWFlyZG1FSU5tRzJMWFlxQ0pkTENKamIzSnlaV04wUVc1emQyVnlJam95ZlN4N0luUjVjR1VpT2lKdFkzRWlMQ0owWlhoMElqb2kyS2ZaaE5pbjJMUFpoU0RZcDltRTJMRFppaURaaXRtRTJLZllzdG1GSU5pbjJZVFlwZGkyMktmWmdkaXBJTmlsMllUWmlTRFlwOW1FMllIWXVkbUVJTmluMllUWmhkaW4yTGJaaWlEWmdkbUMyTGZZakNEWmg5bUlJaXdpWTJodmFXTmxjeUk2V3lMWXJkbUsyS3NpTENMWXBkaXcyS2NpTENMWXBkaXdJaXdpMllUWmhkaW5JbDBzSW1OdmNuSmxZM1JCYm5OM1pYSWlPak45TEhzaWRIbHdaU0k2SW0xamNTSXNJblJsZUhRaU9pTFpndGluMllRZzJLcll1ZGluMllUWmlUb2dLTm1JMllYWXB5RFpnOWluMllZZzJLZllzOWlxMkxyWmdkaW4yTEVnMktYWXFOaXgyS2ZaaDltSzJZVWcyWVRZbzlpbzJZclpoeURZcGRtRTJLY2cyTG5aaGlEWmhkbUkyTG5ZcjlpcElObUkyTG5ZcjltSDJLY2cyS1haaXRpbjJZY3BJRnh1MktYWXVkaXgyS2ZZcUNEWmc5bUUyWVhZcVNBbzJLWFlxTml4MktmWmg5bUsyWVVwSWl3aVkyaHZhV05sY3lJNld5TFpnZGluMkxuWmhDRFpoZGl4MllIWmlOaTVJTmlvMktmWmhOaTIyWVhZcVNJc0l0bUYyTGJZcDltQklOaWwyWVRaaXRtSElObUYyS3pZc2RtSTJMRWcyWWpZdWRtRTJLZlpoZGlwSU5pczJMSFpoeURZcDltRTJZUFlzOWl4MktraUxDTFpoZGkyMktmWmdTRFlwZG1FMllyWmh5RFpoZGlzMkxIWmlOaXhJTm1JMkxuWmhOaW4yWVhZcVNEWXJOaXgyWWNnMktmWmhObUIyS3JZcmRpcElsMHNJbU52Y25KbFkzUkJibk4zWlhJaU9qSjlMSHNpZEhsd1pTSTZJbTFqY1NJc0luUmxlSFFpT2lMWXVkbUcySzhnMllMWmlObUUyWWJZcHpwY2J0aWoyTFBZdWRpdjJLclpodG1LSU5pMjJZcllwOW1CMktrZzJZWFlyZG1GMks4ZzJLZlpoTm1CMktmWXR0bUVJTmkyMllyWmlObUIyWWN1SUZ4dVhHN1ppdGlzMllqWXNpRFl0dGlvMkxjZzJZUFpoTm1GMktrZ0tOaW4yWVRaZ2RpbjJMYlpoQ2tnMktqWXA5bUUyWVBZczlpeDJLa2cyWVhZc2RpbjJMbllwOWlwSU5tRTJZVFpnZGk0Mkl3ZzJZallxTmluMllUWmdkaXEySzNZcVNEWmhkaXgyS2ZZdWRpbjJLa2cyWVRaaE5tRjJLM1poQzRpTENKamFHOXBZMlZ6SWpwYkl0aTEySzBpTENMWXJ0aTMyS01pWFN3aVkyOXljbVZqZEVGdWMzZGxjaUk2TVgwc2V5SjBlWEJsSWpvaWJXTnhJaXdpZEdWNGRDSTZJdG1EMllRZzJLZlpoTmlzMllYWmhDRFlwOW1FMktyWXA5bUUyWXJZcVNEWXF0aTAyS3JaaGRtRUlOaTUyWVRaaVNEWXBkaTIyS2ZaZ2RpcElOaTYyWXJZc1NEWmhkaXQyTGJZcVNEWXVkaXYyS2N1TGk0aUxDSmphRzlwWTJWeklqcGJJdGl6MllUWmhkbUpJTm1GMkt6Wml0aW8yS2tnMktmWmhOaXEySy9Zc2RtSzJLallwOWlxSU5pbjJZVFpoZGluMkxiWml0aXBJaXdpMktmWmhObUYyTG5aaE5tRklObUYyWVBZc2RtRklOaW4yWVRZdDltRTJLZllxQ0RZcDltRTJZWFlxdG1CMllqWmd0bUsyWVlnMktmWmhObUsyWWpaaFNJc0l0aXoyWXJZcXRtRklOaXEyWVBZc2RtSzJZVWcySzNZcDltQjJMZ2cyS2ZaaE5tQzJMSFlvdG1HSU5pNjJLL1lweUlzSXRpbjJZVFpoZGlrMllYWmhpRFlyTm1GMllyWmhDRFlwOW1FMks3WmhObUNJbDBzSW1OdmNuSmxZM1JCYm5OM1pYSWlPakI5TEhzaWRIbHdaU0k2SW0xamNTSXNJblJsZUhRaU9pTFlwOWl6MllVZzJLZlpoTm1GMkxYWXI5aXhJTm1LMkxuWmhkbUVJTmk1MllYWmhDRFlwOW1FMllIWXVkbUVJTmlvMktYWXJObUYyS2ZZdVNEWXA5bUUyWWJZcmRpbjJLa2lMQ0pqYUc5cFkyVnpJanBiSXRpMTJLMGlMQ0xZcnRpMzJLTWlYU3dpWTI5eWNtVmpkRUZ1YzNkbGNpSTZNWDBzZXlKMGVYQmxJam9pYldOeElpd2lkR1Y0ZENJNkl0aXQyTGJZc2RpcUlOaW4yWVRZdDlpbjJZVFlxTmluMktvZzJLallyZGluMllIWmhOaXBJTmluMllUWXJOaW4yWVhZdWRpcExpQmNibHh1MktmWmhObUYyTGJZcDltQklOaWwyWVRaaXRtSElObUIyWW9nMktmWmhOaXMyWVhaaE5pcElOaW4yWVRaaGRpbjJMYlppdGlwSU5pajJZSFlwOWl2SU5pbjJZVFpoZGkyMktmWmdTNHVMaTRpTENKamFHOXBZMlZ6SWpwYkl0aW4yWVRZcXRpdTJMWFppdGkxSWl3aTJLZlpoTmlxMkxuWXNkbUsyWUVpWFN3aVkyOXljbVZqZEVGdWMzZGxjaUk2TVgwc2V5SjBlWEJsSWpvaWJXTnhJaXdpZEdWNGRDSTZJdG1CMllmWmhkaXFJTmlqMllYWmhDRFpnZG1IMllYWXA5bUxJTml2MkxIWXN5RFlwOW1FMllYWXRkaXYyTEV1SUZ4dVhHN1lwOW1FMllYWXRkaXYyTEVnMllIWmlpRFlwOW1FMkt6WmhkbUUyS2tnMktmWmhOaXoyS2ZZcU5tQzJLa2lMQ0pqYUc5cFkyVnpJanBiSXRpNTJLZlpoZG1FSWl3aTJMclppdGl4SU5pNTJLZlpoZG1FSWwwc0ltTnZjbkpsWTNSQmJuTjNaWElpT2pGOUxIc2lkSGx3WlNJNkltMWpjU0lzSW5SbGVIUWlPaUxZcDltRTJLelpoZG1FMktrZzJLZlpoTmlxMllvZzJLZll0TmlxMllYWmhOaXFJTmk1MllUWmlTRFpoZGkxMksvWXNTRFl1dG1LMkxFZzJMbllwOW1GMllRZzJZZlppaTR1SWl3aVkyaHZhV05sY3lJNld5TFpnZG1IMllYWXA5bUxJTmluMllUWXI5aXgyTE1pTENMWmhkbUdJTml0MkxQWmhpRFlwZGl6MllUWXA5bUZJTmluMllUWmhkaXgyS0VnMktyWXNkbUQyWWNnMllYWXB5RFpoTmluSU5tSzJMblpodG1LMlljaUxDTFlzOWluMllIWXNTRFlvOWl0MllYWXJ5RFlzOW1CMkxIWXF0bUsyWVlnMktmWmhObUYySy9aaXRtRzJLa2lYU3dpWTI5eWNtVmpkRUZ1YzNkbGNpSTZNbjBzZXlKMGVYQmxJam9pYldOeElpd2lkR1Y0ZENJNkl0aW4yWVRZck5tRjJZVFlxU0RZcDltRTJLclppaURZcXRpMDJLclpoZG1FSU5pNTJZVFppU0RZcDlpejJZVWcyWVhZdGRpdjJMRWlMQ0pqYUc5cFkyVnpJanBiSXRpbjJLM1lxdG1CMllUWXFpRFlwOW1FMkt6WXA5bUYyTG5ZcVNEWXF0bUQyTEhaaXRtRklOaW4yWVRZdDltRTJLZllxQ0RZcDltRTJZWFlxdG1CMllqWmd0bUsyWVlpTENMWW85aTUyS3pZcU5tRzJZb2cyWWJZdGRpdDJZTWcyWVhZcmRtRjJLL1lweUlzSXRtRjJLellwOW1FMkxQWXF0bURJTmluMllUWmc5aXEyS2dnMks3Wml0aXhJTm1GMllZZzJZWFlyTmluMllUWXM5aXBJTml4MllIWmd0aW4yS0VnMktmWmhOaXoyWWpZb1NKZExDSmpiM0p5WldOMFFXNXpkMlZ5SWpveGZTeDdJblI1Y0dVaU9pSnRZM0VpTENKMFpYaDBJam9pMktmWmhOaXMyWVhaaE5pcElOaW4yWVRZcXRtS0lOaXEyTFRZcXRtRjJZUWcyTG5aaE5tSklObUQyWVRaaGRpcElDalpndGlvMllRcElObUYyS2paaHRtSzJLbllqQ0RaaDltS0lpd2lZMmh2YVdObGN5STZXeUxaZ3RtSTJZVFpoeURZcXRpNTJLZlpoTm1KT2lBbzJZVFpoTm1ISU5pbjJZVFlvOW1GMkxFZzJZWFpoaURaZ3RpbzJZVFpqeURaaU5tRjJZWWcyS2pZdWRpdjJZOHBJaXdpMllMWmlObUUyWWNnMktyWXVkaW4yWVRaaVRvZ0tObUkyS1haaGlEWXQ5bUUyWUxZcXRtRjJZalpoOW1HSU5tRjJZWWcyWUxZcU5tRUlOaWoyWVlnMktyWmhkaXoyWWpaaDltR0tTSXNJdG1DMllqWmhObUhJTmlxMkxuWXA5bUUyWWs2SUNqWmlOaXoyS2pZclNEWXFOaXQyWVhZcnlEWXNkaW8yWU1nMllMWXFObUVJTmkzMllUWmlOaTVJTmluMllUWXRObUYyTE1nMllqWmd0aW8yWVFnMktmWmhOaTYyTEhaaU5pb0tTSmRMQ0pqYjNKeVpXTjBRVzV6ZDJWeUlqb3dmU3g3SW5SNWNHVWlPaUp0WTNFaUxDSjBaWGgwSWpvaTJLZlpoTmlsMkxQWmhOaW4yWVVnMksvWml0bUcyWW91SUZ4dVhHN1ppdGlzMllqWXNpRFl0dGlvMkxjZzJZcllwOWloSU5pbjJZVFpoZGlxMllQWmhObUZJTm1CMllvZzJZUFpoTm1GMktrZ0tOaXYyWXJaaGlrZzJLallwOW1FMkxQWmc5bUkyWVlnMllqWXA5bUUyWUhZcXRpdExpSXNJbU5vYjJsalpYTWlPbHNpMkxYWXJTSXNJdGl1MkxmWW95SmRMQ0pqYjNKeVpXTjBRVzV6ZDJWeUlqb3dmVjE5';
    const examData = JSON.parse(decodeURIComponent(escape(atob(atob(encodedExamData)))));
    //!---END: DECODE EXAM DATA---!//

    let studentName = '', studentAnswers = new Array(examData.questions.length).fill(null), timerInterval, currentQuestionIndex = 0, tabSwitchCount = 0, examFinished = false;
    const startScreen = document.getElementById('startScreen'), examArea = document.getElementById('examArea'), resultContainer = document.getElementById('resultContainer');
    
    window.onload = function() {
        const uniqueExamId = `examStarted_${btoa(unescape(encodeURIComponent(examData.config.title)))}`;
        if (examData.config.singleUseMode && localStorage.getItem(uniqueExamId)) {
            document.body.innerHTML = `<div class="container" style="text-align:center;"><h1>ÿ™ŸÖ ŸÇŸÅŸÑ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±</h1><p>ŸÑŸÇÿØ ŸÇŸÖÿ™ ÿ®ÿ®ÿØÿ° Ÿáÿ∞ÿß ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ± ÿ®ÿßŸÑŸÅÿπŸÑ ŸÖŸÜ Ÿáÿ∞ÿß ÿßŸÑŸÖÿ™ÿµŸÅÿ≠. ŸÑÿß ŸäŸÖŸÉŸÜŸÉ ÿ•ÿ¨ÿ±ÿßÿ§Ÿá ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.</p></div>`;
            return;
        }

        const now = new Date();
        const startTime = examData.config.startTime ? new Date(examData.config.startTime) : null;
        const endTime = examData.config.endTime ? new Date(examData.config.endTime) : null;

        if (startTime && now < startTime) {
            document.getElementById('startScreen').innerHTML = `<h1>ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ± ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠ ÿ®ÿπÿØ</h1><p>ÿ≥ŸäŸÉŸàŸÜ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ± ŸÖÿ™ÿßÿ≠Ÿãÿß ŸÅŸä: ${startTime.toLocaleString('ar-EG')}</p>`;
            return;
        }

        if (endTime && now > endTime) {
            document.getElementById('startScreen').innerHTML = `<h1>ÿßŸÜÿ™Ÿáÿ™ ŸÅÿ™ÿ±ÿ© ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±</h1><p>ŸÑŸÇÿØ ÿßŸÜÿ™Ÿáÿ™ ÿßŸÑŸÅÿ™ÿ±ÿ© ÿßŸÑŸÖÿ≠ÿØÿØÿ© ŸÑÿ•ÿ¨ÿ±ÿßÿ° Ÿáÿ∞ÿß ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±.</p>`;
            return;
        }

        document.getElementById('examTitleStudent').textContent = examData.config.title;
        document.getElementById('examDescriptionStudent').textContent = examData.config.description;
        document.getElementById('startExamBtn').addEventListener('click', () => {
            studentName = document.getElementById('studentName').value.trim();
            if (studentName) startTheExam(); else alert('ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿßÿ≥ŸÖŸÉ.');
        });
    };
    
    function startTheExam() {
        if (examData.config.singleUseMode) {
             const uniqueExamId = `examStarted_${btoa(unescape(encodeURIComponent(examData.config.title)))}`;
             localStorage.setItem(uniqueExamId, 'true');
        }
        sendStartNotificationToTelegram();
        startScreen.style.display = 'none'; examArea.style.display = 'block';
        document.getElementById('welcomeStudent').textContent = `ÿ®ÿßŸÑÿ™ŸàŸÅŸäŸÇÿå ${studentName}!`;
        if (examData.config.time > 0) startTimer(examData.config.time * 60); else document.getElementById('timer').style.display = 'none';
        if (examData.config.shuffle) { examData.questions.sort(() => Math.random() - 0.5); }
        setupSmartFeatures(); renderQuestionsForStudent();
        document.getElementById('finishExamBtn').addEventListener('click', () => { if(confirm("ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ±ÿ∫ÿ®ÿ™ŸÉ ŸÅŸä ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±ÿü")) finishTheExam(); });
    }
    
    function renderQuestionsForStudent(){const container=document.getElementById("questionsContainer");container.innerHTML="",examData.config.layout==="one-by-one"?(renderSingleQuestion(currentQuestionIndex),updateNavigationButtons()):examData.questions.forEach((e,t)=>container.appendChild(createQuestionElement(e,t))),updateProgressBar()}function createQuestionElement(e,t){const n=document.createElement("div");n.className="question-card",n.id=`question-${t}`;let o=`<h3>ÿßŸÑÿ≥ÿ§ÿßŸÑ ${t+1}: ${e.text}</h3>`;if("mcq"===e.type){const i=e.choices.map((e,n)=>`<li onclick="handleChoiceClick(${t}, ${n}, this)"><input type="radio" name="q${t}" id="q${t}c${n}" value="${n}" ${studentAnswers[t]===n?"checked":""}><label for="q${t}c${n}">${e}</label></li>`).join("");o+=`<ul class="choices">${i}</ul>`}else{const s=studentAnswers[t]||"";o+=`<textarea class="essay-answer" oninput="handleEssayInput(${t}, this.value)" placeholder="ÿßŸÉÿ™ÿ® ÿ•ÿ¨ÿßÿ®ÿ™ŸÉ ŸáŸÜÿß...">${s}</textarea>`}return n.innerHTML=o,n}function handleChoiceClick(e,t,n){studentAnswers[e]=t,n.querySelector("input").checked=!0,examData.config.layout==="one-by-one"&&examData.config.learningMode&&"mcq"===examData.questions[e].type&&((n.classList.add(t===examData.questions[e].correctAnswer?"correct":"incorrect"),n.parentElement.querySelectorAll("li").forEach(e=>{e.style.pointerEvents="none"}))),updateProgressBar()}function handleEssayInput(e,t){studentAnswers[e]=t.trim(),updateProgressBar()}function renderSingleQuestion(e){document.getElementById("questionsContainer").appendChild(createQuestionElement(examData.questions[e],e))}function updateNavigationButtons(){const e=document.getElementById("navigation-buttons");if("one-by-one"!==examData.config.layout)return void(e.style.display="none");let t="";examData.config.noGoingBack||(t='<button id="prevBtn" class="btn">ÿßŸÑÿ≥ÿßÿ®ŸÇ</button>'),e.innerHTML=`${t}<button id="nextBtn" class="btn">ÿßŸÑÿ™ÿßŸÑŸä</button>`;const n=document.getElementById("nextBtn");n.disabled=currentQuestionIndex===examData.questions.length-1,n.addEventListener("click",()=>{currentQuestionIndex<examData.questions.length-1&&(currentQuestionIndex++,renderQuestionsForStudent())}),examData.config.noGoingBack||(document.getElementById("prevBtn").disabled=0===currentQuestionIndex,document.getElementById("prevBtn").addEventListener("click",()=>{currentQuestionIndex>0&&(currentQuestionIndex--,renderQuestionsForStudent())}))}function updateProgressBar(){const e=studentAnswers.filter(e=>null!==e&&""!==e).length,t=e/examData.questions.length*100,n=document.getElementById("progressBar");n.style.width=`${t}%`,n.textContent=`${Math.round(t)}%`}
    
    function setupSmartFeatures(){
        if(examData.config.disableCheating){
            ["contextmenu","copy","paste"].forEach(evt => document.body.addEventListener(evt, e => e.preventDefault()));
        }
        if(examData.config.monitorTabs){
            document.addEventListener("visibilitychange", () => {
                if (document.visibilityState === "hidden" && !examFinished) {
                    tabSwitchCount++;
                    if (examData.config.finishOnSwitch) {
                        alert("ŸÑŸÇÿØ ÿÆÿ±ÿ¨ÿ™ ŸÖŸÜ ŸÜÿßŸÅÿ∞ÿ© ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±ÿå ÿ≥Ÿäÿ™ŸÖ ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ± Ÿàÿ•ÿ±ÿ≥ÿßŸÑ ŸÜÿ™Ÿäÿ¨ÿ™ŸÉ ÿßŸÑÿ≠ÿßŸÑŸäÿ©.");
                        finishTheExam();
                    }
                }
            });
        }
    }

    async function finishTheExam(){
        if(examFinished) return;
        examFinished = true;
        clearInterval(timerInterval);
        examArea.style.display="none";
        resultContainer.style.display="block";
        let e=0,t=0;
        if(examData.questions.forEach((n,o)=>{("mcq"===n.type&&(t++,studentAnswers[o]===n.correctAnswer&&e++))}),document.getElementById("resultTitle").textContent="ÿ™ŸÖ ÿßŸÑÿßŸÜÿ™Ÿáÿßÿ° ŸÖŸÜ ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ!",examData.config.showResults){let n=`ŸÖÿ±ÿ≠ÿ®ÿßŸã ${studentName}ÿå ŸÜÿ™Ÿäÿ¨ÿ™ŸÉ ŸÅŸä ÿ£ÿ≥ÿ¶ŸÑÿ© ÿßŸÑÿßÿÆÿ™Ÿäÿßÿ± ŸÖŸÜ ŸÖÿ™ÿπÿØÿØ ŸáŸä: <strong>${e} / ${t}</strong>`;examData.questions.some(e=>"essay"===e.type)&&(n+='<br><small>ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ÿßŸÑŸÖŸÇÿßŸÑŸäÿ© ÿ™ÿ™ÿ∑ŸÑÿ® ÿ™ÿµÿ≠Ÿäÿ≠Ÿãÿß ŸäÿØŸàŸäŸãÿß Ÿàÿ≥ÿ™ÿ∏Ÿáÿ± ŸÜÿ™Ÿäÿ¨ÿ™Ÿáÿß ŸÑÿßÿ≠ŸÇÿßŸã.</small>'),examData.config.monitorTabs&&tabSwitchCount>0&&(n+=`<br><small style="color:var(--danger-color);">ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉ ŸÖŸÜ ÿßŸÑÿµŸÅÿ≠ÿ© ${tabSwitchCount} ŸÖÿ±ÿßÿ™.</small>`),document.getElementById("resultSummary").innerHTML=n}else document.getElementById("resultSummary").textContent="ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉÿå ÿ™ŸÖ ÿ™ÿ≥ŸÑŸäŸÖ ÿ•ÿ¨ÿßÿ®ÿßÿ™ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠.";examData.config.showResults&&examData.config.enableReview&&renderReview(),examData.config.enableCertificate&&t>0&&e/t*100>=examData.config.successPercentage&&renderCertificate(e,t),examData.config.botToken&&examData.config.chatId&&await sendResultsToTelegram(e,t)
    }
    
    function renderReview(){const e=document.getElementById("reviewContainer");e.innerHTML="<h3>ŸÖÿ±ÿßÿ¨ÿπÿ© ÿßŸÑÿ•ÿ¨ÿßÿ®ÿßÿ™:</h3>",examData.questions.forEach((t,n)=>{let o="";o="mcq"===t.type?`<div class="question-card" style="background:${studentAnswers[n]===t.correctAnswer?"#d4edda":"#f8d7da"};"><p><strong>${t.text}</strong></p><p>ÿ•ÿ¨ÿßÿ®ÿ™ŸÉ: ${null!==studentAnswers[n]?t.choices[studentAnswers[n]]:"ŸÑŸÖ ÿ™ÿ™ŸÖ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ©"} ${studentAnswers[n]===t.correctAnswer?"‚úîÔ∏è":"‚ùå"}</p>${studentAnswers[n]!==t.correctAnswer?`<p style="color:var(--primary-color);">ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ©: ${t.choices[t.correctAnswer]}</p>`:""}</div>`:`<div class="question-card" style="background: #e9ecef;"><p><strong>(ÿ≥ÿ§ÿßŸÑ ŸÖŸÇÿßŸÑŸä) ${t.text}</strong></p><p style="font-weight:bold;">ÿ•ÿ¨ÿßÿ®ÿ™ŸÉ:</p><p style="white-space: pre-wrap; background: #fff; padding:10px; border-radius:5px;">${studentAnswers[n]?studentAnswers[n].replace(/</g,"&lt;").replace(/>/g,"&gt;"):"ŸÑŸÖ ÿ™ÿ™ŸÖ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ©"}</p></div>`,e.innerHTML+=o})}function renderCertificate(e,t){const n=document.getElementById("certificate");n.style.display="block",document.getElementById("certName").textContent=studentName,document.getElementById("certScore").textContent=`${e} / ${t}`,document.getElementById("certDate").textContent=(new Date).toLocaleDateString("ar-EG")}function startTimer(e){let t=e;const n=document.getElementById("timer");timerInterval=setInterval(()=>{let e=parseInt(t/60,10),o=parseInt(t%60,10);e=e<10?"0"+e:e,o=o<10?"0"+o:o,n.textContent=`${e}:${o}`,--t<0&&(clearInterval(timerInterval),alert("ÿßŸÜÿ™ŸáŸâ ÿßŸÑŸàŸÇÿ™!"),finishTheExam())},1e3)}async function sendResultsToTelegram(e,t){const{botToken:n,chatId:o,title:s}=examData.config;if(!n||!o)return;function i(e){return"string"!=typeof e?"":e.replace(/([_*[\]()~>#+\-=|{}.!])/g,"\\$1")}let a=`*üìä ŸÜÿ™Ÿäÿ¨ÿ© ÿßÿÆÿ™ÿ®ÿßÿ± ÿ¨ÿØŸäÿØÿ©*\n\n*ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±:* ${i(s)}\n*ÿßŸÑÿ∑ÿßŸÑÿ®:* ${i(studentName)}\n*ŸÜÿ™Ÿäÿ¨ÿ© ÿßŸÑÿßÿÆÿ™Ÿäÿßÿ± ŸÖŸÜ ŸÖÿ™ÿπÿØÿØ:* ${e} ŸÖŸÜ ${t}\n*ŸÖÿ±ÿßÿ™ ÿßŸÑÿÆÿ±Ÿàÿ¨:* ${tabSwitchCount}`;let d="\n\n*ÿßŸÑÿ•ÿ¨ÿßÿ®ÿßÿ™ ÿßŸÑŸÖŸÇÿßŸÑŸäÿ©*",r=!1;examData.questions.forEach((e,t)=>{("essay"===e.type&&(r=!0,d+=`\n\n*‚ùì ÿßŸÑÿ≥ÿ§ÿßŸÑ: ${i(e.text)}*\n*üìù ÿ•ÿ¨ÿßÿ®ÿ© ÿßŸÑÿ∑ÿßŸÑÿ®:*\n${i(studentAnswers[t]||"ŸÑŸÖ ÿ™ÿ™ŸÖ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ©")}`))}),r&&(a+=d);const c=`https://api.telegram.org/bot${n}/sendMessage`;try{a.length>4096&&(a=a.substring(0,4e3)+"\n\n... (ÿ™ŸÖ ÿßŸÇÿ™ÿ∑ÿßÿπ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ© ŸÑÿ£ŸÜŸáÿß ÿ∑ŸàŸäŸÑÿ© ÿ¨ÿØÿßŸã)");const l=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:o,text:a,parse_mode:"MarkdownV2"})});l.ok||console.error("Telegram API Error:",await l.json())}catch(p){console.error("Fetch error or issue sending to Telegram:",p)}}async function sendStartNotificationToTelegram(){const{botToken:n,chatId:o,title:s}=examData.config;if(!n||!o)return;function i(e){return"string"!=typeof e?"":e.replace(/([_*[\]()~>#+\-=|{}.!])/g,"\\$1")}const a=`*üîî ÿ®ÿØÿ° ÿßÿÆÿ™ÿ®ÿßÿ± ÿ¨ÿØŸäÿØ*\n\n*ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±:* ${i(s)}\n*ÿßŸÑÿ∑ÿßŸÑÿ®:* ${i(studentName)}`,c=`https://api.telegram.org/bot${n}/sendMessage`;try{const l=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:o,text:a,parse_mode:"MarkdownV2"})});l.ok||console.error("Telegram API Error (Start Notification):",await l.json())}catch(p){console.error("Fetch error sending start notification:",p)}}
</script>
</body>
</html>
